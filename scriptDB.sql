 CREATE TABLE CCM_PETICION
(
	IDPETICION NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
	USUCREACION varchar2(50),
	FECCREACION date,
	USUMODIF varchar2(50),
	FECMODIF date,
	NUMOPERACION varchar2(200) NOT NULL,
	INDERROR number(1,0) NOT NULL CHECK (INDERROR IN (1,0)),
	constraint CCM_PETICION_PK primary key (IDPETICION)
);

CREATE TABLE CCM_DETALLE
(
	IDDETALLE NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
	IDPETICION number(10) NOT NULL,
	USUCREACION varchar2(50),
	FECCREACION date,
	USUMODIF varchar2(50),
	FECMODIF date,
	NOMFASE varchar2(50),
	INPUTJSON clob,
	RESPONSEJSON clob, 
	INDERROR number(1,0) NOT NULL CHECK (INDERROR IN (1,0)),
	DESCERROR varchar2(100),
	constraint CCM_DETALLE_PK primary key (IDDETALLE),
	constraint CCM_DETALLE_FK FOREIGN KEY (IDPETICION) REFERENCES CCM_PETICION(IDPETICION)
);

CREATE TABLE CCM_SISTEMA
(
	IDSISTEMA NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
	USUCREACION varchar2(50),
	FECCREACION date,
	USUMODIF varchar2(50),
	FECMODIF date,
	NOMBRE varchar2(100) NOT NULL,
	INDACTIVO number(1,0) NOT NULL CHECK (INDACTIVO IN (1,0)),
	constraint CCM_SISTEMA primary key (IDSISTEMA)
);

CREATE TABLE CCM_DOCUMENTO
(
	IDDOCUMENTO number GENERATED BY DEFAULT ON NULL AS IDENTITY,
	IDSISTEMA number(10) NOT NULL,
	USUCREACION varchar2(50),
	FECCREACION date,
	USUMODIF varchar2(50),
	FECMODIF date,
	CODIGO varchar2(100) NOT NULL,
	NOMBRE varchar2(100) NOT NULL,
	INDACTIVO number(1,0) NOT NULL CHECK (INDACTIVO IN (1,0)),
	constraint CCM_DOCUMENTO_PK primary key (IDDOCUMENTO),
	constraint CCM_DOCUMENTO_FK FOREIGN KEY (IDSISTEMA) REFERENCES CCM_SISTEMA(IDSISTEMA)
);


GRANT ALL ON CCM_PETICION TO DS_JOBT_TEST;
GRANT ALL ON CCM_DETALLE TO DS_JOBT_TEST;
GRANT ALL ON CCM_SISTEMA TO DS_JOBT_TEST;
GRANT ALL ON CCM_DOCUMENTO TO DS_JOBT_TEST;



--INSERTS DE SISTEMAS
INSERT INTO CCM_SISTEMA (USUCREACION, FECCREACION, NOMBRE, INDACTIVO) VALUES ('RTB', SYSDATE, 'Salesforce', 0);
INSERT INTO CCM_SISTEMA (USUCREACION, FECCREACION, NOMBRE, INDACTIVO) VALUES ('RTB', SYSDATE, 'Bizagi', 0);
INSERT INTO CCM_SISTEMA (USUCREACION, FECCREACION, NOMBRE, INDACTIVO) VALUES ('RTB', SYSDATE, 'Thunderhead', 0);

--INSERTS DE DOCUMENTOS DE BIZAGI
INSERT INTO CCM_DOCUMENTO (IDSISTEMA, USUCREACION, FECCREACION, CODIGO, NOMBRE, INDACTIVO) VALUES ((SELECT MAX(IDSISTEMA) FROM CCM_SISTEMA WHERE NOMBRE = 'Bizagi'), 'RTB', SYSDATE, 'BIZAGI_001', 'Notificación por Observación', 0);
INSERT INTO CCM_DOCUMENTO (IDSISTEMA, USUCREACION, FECCREACION, CODIGO, NOMBRE, INDACTIVO) VALUES ((SELECT MAX(IDSISTEMA) FROM CCM_SISTEMA WHERE NOMBRE = 'Bizagi'), 'RTB', SYSDATE, 'BIZAGI_002', 'Carta ampliación de plazo', 0);
INSERT INTO CCM_DOCUMENTO (IDSISTEMA, USUCREACION, FECCREACION, CODIGO, NOMBRE, INDACTIVO) VALUES ((SELECT MAX(IDSISTEMA) FROM CCM_SISTEMA WHERE NOMBRE = 'Bizagi'), 'RTB', SYSDATE, 'BIZAGI_003', 'Carta Física por generación de OP', 0);
INSERT INTO CCM_DOCUMENTO (IDSISTEMA, USUCREACION, FECCREACION, CODIGO, NOMBRE, INDACTIVO) VALUES ((SELECT MAX(IDSISTEMA) FROM CCM_SISTEMA WHERE NOMBRE = 'Bizagi'), 'RTB', SYSDATE, 'BIZAGI_004', 'Carta rechazo exclusión', 0);
INSERT INTO CCM_DOCUMENTO (IDSISTEMA, USUCREACION, FECCREACION, CODIGO, NOMBRE, INDACTIVO) VALUES ((SELECT MAX(IDSISTEMA) FROM CCM_SISTEMA WHERE NOMBRE = 'Bizagi'), 'RTB', SYSDATE, 'BIZAGI_005', 'Carta rechazo informativo', 0);
INSERT INTO CCM_DOCUMENTO (IDSISTEMA, USUCREACION, FECCREACION, CODIGO, NOMBRE, INDACTIVO) VALUES ((SELECT MAX(IDSISTEMA) FROM CCM_SISTEMA WHERE NOMBRE = 'Bizagi'), 'RTB', SYSDATE, 'BIZAGI_006', 'Notificación por ampliación de plazo', 0);
INSERT INTO CCM_DOCUMENTO (IDSISTEMA, USUCREACION, FECCREACION, CODIGO, NOMBRE, INDACTIVO) VALUES ((SELECT MAX(IDSISTEMA) FROM CCM_SISTEMA WHERE NOMBRE = 'Bizagi'), 'RTB', SYSDATE, 'BIZAGI_007', 'Notificación por Rechazo', 0);

--INSERTS DE DOCUMENTOS DE SALESFORCE
INSERT INTO CCM_DOCUMENTO (IDSISTEMA, USUCREACION, FECCREACION, CODIGO, NOMBRE, INDACTIVO) VALUES ((SELECT MAX(IDSISTEMA) FROM CCM_SISTEMA WHERE NOMBRE = 'Salesforce'), 'RTB', SYSDATE, 'SALESF_001', 'Carta de Ampliación', 0);
INSERT INTO CCM_DOCUMENTO (IDSISTEMA, USUCREACION, FECCREACION, CODIGO, NOMBRE, INDACTIVO) VALUES ((SELECT MAX(IDSISTEMA) FROM CCM_SISTEMA WHERE NOMBRE = 'Salesforce'), 'RTB', SYSDATE, 'SALESF_002', 'Cierre de reclamos', 0);
INSERT INTO CCM_DOCUMENTO (IDSISTEMA, USUCREACION, FECCREACION, CODIGO, NOMBRE, INDACTIVO) VALUES ((SELECT MAX(IDSISTEMA) FROM CCM_SISTEMA WHERE NOMBRE = 'Salesforce'), 'RTB', SYSDATE, 'SALESF_003', 'Informe de resultados', 0);
INSERT INTO CCM_DOCUMENTO (IDSISTEMA, USUCREACION, FECCREACION, CODIGO, NOMBRE, INDACTIVO) VALUES ((SELECT MAX(IDSISTEMA) FROM CCM_SISTEMA WHERE NOMBRE = 'Salesforce'), 'RTB', SYSDATE, 'SALESF_004', 'Libro de reclamaciones', 0);
INSERT INTO CCM_DOCUMENTO (IDSISTEMA, USUCREACION, FECCREACION, CODIGO, NOMBRE, INDACTIVO) VALUES ((SELECT MAX(IDSISTEMA) FROM CCM_SISTEMA WHERE NOMBRE = 'Salesforce'), 'RTB', SYSDATE, 'SALESF_005', 'Notificación de servicio', 0);
INSERT INTO CCM_DOCUMENTO (IDSISTEMA, USUCREACION, FECCREACION, CODIGO, NOMBRE, INDACTIVO) VALUES ((SELECT MAX(IDSISTEMA) FROM CCM_SISTEMA WHERE NOMBRE = 'Salesforce'), 'RTB', SYSDATE, 'SALESF_006', 'Reporte Siniestro vehicular broker', 0);
INSERT INTO CCM_DOCUMENTO (IDSISTEMA, USUCREACION, FECCREACION, CODIGO, NOMBRE, INDACTIVO) VALUES ((SELECT MAX(IDSISTEMA) FROM CCM_SISTEMA WHERE NOMBRE = 'Salesforce'), 'RTB', SYSDATE, 'SALESF_007', 'Reporte Siniestro vehicular proveedor', 0);

--INSERTS DE DOCUMENTOS THUNDERHEAD
INSERT INTO CCM_DOCUMENTO (IDSISTEMA, USUCREACION, FECCREACION, CODIGO, NOMBRE, INDACTIVO) VALUES ((SELECT MAX(IDSISTEMA) FROM CCM_SISTEMA WHERE NOMBRE = 'Thunderhead'), 'RTB', SYSDATE, 'CM_NBR_002_PRIN', 'Propuesta De Renovación PDF', 0);
INSERT INTO CCM_DOCUMENTO (IDSISTEMA, USUCREACION, FECCREACION, CODIGO, NOMBRE, INDACTIVO) VALUES ((SELECT MAX(IDSISTEMA) FROM CCM_SISTEMA WHERE NOMBRE = 'Thunderhead'), 'RTB', SYSDATE, 'CM_NBR_002_EMAIL', 'Propuesta De Renovación  WEB Mail', 0);
INSERT INTO CCM_DOCUMENTO (IDSISTEMA, USUCREACION, FECCREACION, CODIGO, NOMBRE, INDACTIVO) VALUES ((SELECT MAX(IDSISTEMA) FROM CCM_SISTEMA WHERE NOMBRE = 'Thunderhead'), 'RTB', SYSDATE, 'CM_NBR_008_SMS', 'Notificación para regularización de deuda vencida', 0);
INSERT INTO CCM_DOCUMENTO (IDSISTEMA, USUCREACION, FECCREACION, CODIGO, NOMBRE, INDACTIVO) VALUES ((SELECT MAX(IDSISTEMA) FROM CCM_SISTEMA WHERE NOMBRE = 'Thunderhead'), 'RTB', SYSDATE, 'CM_NBR_009_EMAIL', 'Notificacion_de_rechazo_por_no_regulacion_de_deuda', 0);
INSERT INTO CCM_DOCUMENTO (IDSISTEMA, USUCREACION, FECCREACION, CODIGO, NOMBRE, INDACTIVO) VALUES ((SELECT MAX(IDSISTEMA) FROM CCM_SISTEMA WHERE NOMBRE = 'Thunderhead'), 'RTB', SYSDATE, 'CM_NBR_000_EMAIL', 'Notificación de Bienvenida', 0);
INSERT INTO CCM_DOCUMENTO (IDSISTEMA, USUCREACION, FECCREACION, CODIGO, NOMBRE, INDACTIVO) VALUES ((SELECT MAX(IDSISTEMA) FROM CCM_SISTEMA WHERE NOMBRE = 'Thunderhead'), 'RTB', SYSDATE, 'CM_NBR_000_EMAIL', 'Notificación de Bienvenida a la Web', 0);
INSERT INTO CCM_DOCUMENTO (IDSISTEMA, USUCREACION, FECCREACION, CODIGO, NOMBRE, INDACTIVO) VALUES ((SELECT MAX(IDSISTEMA) FROM CCM_SISTEMA WHERE NOMBRE = 'Thunderhead'), 'RTB', SYSDATE, 'CM-NBRG-000_EMAIL', 'Notificación solicitar información completa', 0);
INSERT INTO CCM_DOCUMENTO (IDSISTEMA, USUCREACION, FECCREACION, CODIGO, NOMBRE, INDACTIVO) VALUES ((SELECT MAX(IDSISTEMA) FROM CCM_SISTEMA WHERE NOMBRE = 'Thunderhead'), 'RTB', SYSDATE, 'CM-NBRG-002_EMAIL', 'Notificación de Envío Slip', 0);
INSERT INTO CCM_DOCUMENTO (IDSISTEMA, USUCREACION, FECCREACION, CODIGO, NOMBRE, INDACTIVO) VALUES ((SELECT MAX(IDSISTEMA) FROM CCM_SISTEMA WHERE NOMBRE = 'Thunderhead'), 'RTB', SYSDATE, 'CM-NBRG-004_EMAL', 'Solicitud Visto Bueno Endoso WEB Mail', 0);
INSERT INTO CCM_DOCUMENTO (IDSISTEMA, USUCREACION, FECCREACION, CODIGO, NOMBRE, INDACTIVO) VALUES ((SELECT MAX(IDSISTEMA) FROM CCM_SISTEMA WHERE NOMBRE = 'Thunderhead'), 'RTB', SYSDATE, 'CM-NBRG-004_PRINT', 'Solicitud Visto Bueno Endoso PDF', 0);